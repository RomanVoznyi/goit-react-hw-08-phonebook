(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var r,c=n(3),a=n(1),u=n.n(a),s=n(17),o=n.n(s),i=n(26),b=n(8),l=n(66),j=n(46),d=n(6),f=n(28),p=n(51),h=n.n(p),O=n(21),m=n(15),x=n(14),v=Object(d.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingAuth:!1,error:!1},extraReducers:(r={},Object(x.a)(r,m.d.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.error=!1,e.isLoggedIn=!0})),Object(x.a)(r,m.b.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.error=!1,e.isLoggedIn=!0})),Object(x.a)(r,m.c.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.error=!1,e.isLoggedIn=!1})),Object(x.a)(r,m.a.pending,(function(e,t){e.isFetchingAuth=!0})),Object(x.a)(r,m.a.fulfilled,(function(e,t){e.user=t.payload,e.error=!1,e.isLoggedIn=!0,e.isFetchingAuth=!1})),Object(x.a)(r,m.d.rejected,(function(e,t){e.error=!0})),Object(x.a)(r,m.b.rejected,(function(e,t){e.error=!0})),Object(x.a)(r,m.c.rejected,(function(e,t){e.error=!0})),Object(x.a)(r,m.a.rejected,(function(e,t){e.isFetchingAuth=!1})),r)}).reducer,g=n(20),k=Object(j.a)(Object(d.f)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})),w={key:"auth",storage:h.a,whitelist:["token"]},y={key:"phoneBook",storage:h.a,whitelist:["token"]},N=Object(d.a)({reducer:{auth:Object(f.g)(w,v),phoneBook:Object(f.g)(y,O.c)},middleware:k,devTools:!1}),C=Object(f.h)(N),F=n(11),L=n(34),B=n(22),A=n(54),I=n.n(A),S=n(153),T=n(45),z=(n(133),Object(a.lazy)((function(){return n.e(1).then(n.bind(null,158))}))),P=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,161))})),R=Object(a.lazy)((function(){return n.e(2).then(n.bind(null,159))})),M=Object(a.lazy)((function(){return n.e(0).then(n.bind(null,160))})),V=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,162))})),q=function(){var e=Object(b.c)(g.c),t=Object(b.c)(g.b),n=Object(b.b)();return Object(a.useEffect)((function(){n(Object(m.a)())}),[n]),Object(c.jsxs)("div",{className:"App container",children:[Object(c.jsx)(B.a,{autoClose:2e3}),Object(c.jsx)(L.d,{}),Object(c.jsxs)("div",{className:"viewContainer",children:[e&&Object(c.jsx)(I.a,{type:"Circles",color:"#00BFFF",height:80,width:80}),t&&Object(c.jsx)("div",{children:'"Something was wrong"'}),!e&&!t&&Object(c.jsx)(a.Suspense,{fallback:Object(c.jsx)(I.a,{type:"Circles",color:"#00BFFF",height:80,width:80}),children:Object(c.jsxs)(F.d,{children:[Object(c.jsx)(L.f,{path:"/",exact:!0,children:Object(c.jsx)(z,{})}),Object(c.jsx)(L.f,{path:"/register",exact:!0,restricted:!0,children:Object(c.jsx)(P,{})}),Object(c.jsx)(L.f,{path:"/login",exact:!0,restricted:!0,children:Object(c.jsx)(R,{})}),Object(c.jsx)(L.e,{path:"/contacts",redirectTo:"/login",children:Object(c.jsx)(M,{})}),Object(c.jsx)(L.f,{children:Object(c.jsx)(V,{})})]})})]}),Object(c.jsxs)("div",{className:"footer",children:[Object(c.jsx)(S.a,{id:"icon-copyRigths"}),"Created by RV | 2021",Object(c.jsx)(T.a,{id:"icon-heart"})]})]})};n(134),n(135),n(136);o.a.render(Object(c.jsx)(u.a.StrictMode,{children:Object(c.jsx)(b.a,{store:N,children:Object(c.jsx)(l.a,{loading:null,persistor:C,children:Object(c.jsx)(i.a,{children:Object(c.jsx)(q,{})})})})}),document.getElementById("root"))},15:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return l}));var r=n(5),c=n.n(r),a=n(13),u=n(6),s=n(30),o=Object(u.c)("auth/register",function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.g)(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=Object(u.c)("auth/login",function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.e)(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(u.c)("auth/logout",Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.f)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),l=Object(u.c)("auth/checkCurrent",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),a=r.auth.token){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return e.next=6,Object(s.b)(a);case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return u}));var r=function(e){return e.auth.isLoggedIn},c=function(e){return e.auth.user.name},a=function(e){return e.auth.isFetchingAuth},u=function(e){return e.auth.error}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return a}));var r={};n.r(r),n.d(r,"changeFilter",(function(){return o}));var c={};n.r(c),n.d(c,"fetchContacts",(function(){return d})),n.d(c,"addContacts",(function(){return f})),n.d(c,"deleteContacts",(function(){return p}));var a={};n.r(a),n.d(a,"getContacts",(function(){return k})),n.d(a,"getFilter",(function(){return w})),n.d(a,"getVisibleContacts",(function(){return y}));var u,s=n(6),o=Object(s.b)("phoneBook/filter"),i=n(5),b=n.n(i),l=n(13),j=n(30),d=Object(s.c)("phoneBook/fetchContacts",Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.d)();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),f=Object(s.c)("phoneBook/add",function(){var e=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(s.c)("phoneBook/delete",function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.c)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=n(14),O=n(46),m=n(16),x=Object(s.d)([],(u={},Object(h.a)(u,d.fulfilled,(function(e,t){return t.payload})),Object(h.a)(u,f.fulfilled,(function(e,t){return[].concat(Object(O.a)(e),[t.payload])})),Object(h.a)(u,p.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),u)),v=Object(s.d)("",Object(h.a)({},o,(function(e,t){return t.payload}))),g=Object(m.c)({contacts:x,filter:v}),k=function(e){return e.phoneBook.contacts},w=function(e){return e.phoneBook.filter},y=function(e){var t=k(e),n=w(e);return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))}},30:function(e,t,n){"use strict";n.d(t,"g",(function(){return j})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return v}));var r=n(5),c=n.n(r),a=n(13),u=n(6),s=n(27),o=n.n(s),i=n(22);o.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var b=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""},j=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,b(r.token),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),i.b.error("Registration error. ".concat(e.t0.message)),e.abrupt("return",new Promise(u.g));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/login",t);case 3:return n=e.sent,r=n.data,b(r.token),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),i.b.error("Login error. ".concat(e.t0.message)),e.abrupt("return",new Promise(u.g));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/logout");case 3:l(),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),i.b.error("Logout error. ".concat(e.t0.message)),e.abrupt("return",new Promise(u.g));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(t),e.prev=1,e.next=4,o.a.get("/users/current");case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),i.b.error("CheckCurrent error. ".concat(e.t0.message)),e.abrupt("return",new Promise(u.g));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();function h(){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/contacts");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),i.b.error("Getting Contacts error. ".concat(e.t0.message)),e.abrupt("return",new Promise(u.g));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(e){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/contacts",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),i.b.error("Adding new contact error. ".concat(e.t0.message)),e.abrupt("return",new Promise(u.g));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("/contacts/".concat(t));case 3:return e.abrupt("return",t);case 6:return e.prev=6,e.t0=e.catch(0),i.b.error("Deleting contact error. ".concat(e.t0.message)),e.abrupt("return",new Promise(u.g));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}},34:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return v})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return F}));var r=n(3),c=n(38),a=n(1),u=n(8),s=n(26),o=n(67),i=n(20),b=n(15),l=n(154),j=n(152),d=n(48),f=n(45),p=function(){var e=Object(u.c)((function(e){return Object(i.a)(e)})),t=Object(u.c)((function(e){return Object(i.d)(e)})),n=Object(a.useState)(!1),p=Object(c.a)(n,2),h=p[0],O=p[1],m=Object(u.b)(),x=Object(o.useMediaQuery)({query:"(max-device-width: 767px)"}),v=function(){O((function(e){return!e}))};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("nav",{className:"navBar container",children:[Object(r.jsx)(s.b,{to:"/",className:"logo",children:Object(r.jsx)("div",{className:"navLogoBackground",children:Object(r.jsx)(j.a,{className:"logo",style:{fontSize:25}})})}),!x&&Object(r.jsx)(s.b,{to:"/",exact:!0,className:"link",activeClassName:"activeLink",children:"Home"}),e&&Object(r.jsx)(s.b,{to:"/contacts",className:"link",activeClassName:"activeLink",children:"PhoneBook"}),x&&Object(r.jsx)(l.a,{id:"modalMenu",color:"primary",variant:"contained",type:"button",onClick:v,children:h?Object(r.jsx)(d.a,{}):Object(r.jsx)(f.b,{})}),Object(r.jsx)("span",{className:x?h?"authMobileBar":"visually-hidden":"authBar",onClick:v,children:e?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d.c,{className:"avatar",style:{fontSize:25}}),Object(r.jsxs)("span",{className:"greeting",children:["Welcome",Object(r.jsx)("span",{className:"userName",children:t})]}),Object(r.jsxs)(l.a,{color:"primary",variant:"contained",type:"button",onClick:function(){return m(Object(b.c)())},children:["Log out",Object(r.jsx)(d.b,{style:{marginLeft:10}})]})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(s.b,{to:"/register",exact:!0,className:"link register",activeClassName:"activeLink",children:"Register"}),Object(r.jsx)(s.b,{to:"/login",className:"link",activeClassName:"activeLink",children:"Login"})]})})]})})},h=n(37),O=n(47),m=n(11),x=function(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/":n,a=Object(O.a)(e,["children","redirectTo"]),s=Object(u.c)((function(e){return Object(i.a)(e)}));return Object(r.jsx)(m.b,Object(h.a)(Object(h.a)({},a),{},{children:s?t:Object(r.jsx)(m.a,{to:c})}))},v=function(e){var t=e.children,n=e.restricted,c=void 0!==n&&n,a=e.redirectTo,s=void 0===a?"/":a,o=Object(O.a)(e,["children","restricted","redirectTo"]),b=Object(u.c)((function(e){return Object(i.a)(e)}));return Object(r.jsx)(m.b,Object(h.a)(Object(h.a)({},o),{},{children:b&&c?Object(r.jsx)(m.a,{to:s}):t}))},g=n(21),k=n(22),w=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(""),i=Object(c.a)(o,2),b=i[0],l=i[1],j=Object(u.c)((function(e){return g.d.getContacts(e)})),d=Object(u.b)(),f=function(e,t){return e.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))},p=function(e){var t=e.target,n=t.name,r=t.value;return"name"===n?s(r):l(r)},h=function(){s(""),l("")};return Object(r.jsxs)("form",{className:"subForm",onSubmit:function(e){e.preventDefault(),f(j,n)?k.b.error("".concat(n," is already in contacts.")):(d(g.b.addContacts({name:n,number:b})),h())},children:[Object(r.jsx)("h2",{className:"subFormTitle",children:"Add new contacts:"}),Object(r.jsxs)("label",{className:"subFormLabel",children:[Object(r.jsx)("span",{className:"subFormLabelTitle",children:"Name:"}),Object(r.jsx)("input",{className:"subFormInput",type:"text",onChange:p,value:n,name:"name",placeholder:"input name",required:!0})]}),Object(r.jsxs)("label",{className:"subFormLabel",children:[Object(r.jsx)("span",{className:"subFormLabelTitle",children:"Phone:"}),Object(r.jsx)("input",{className:"subFormInput",type:"text",onChange:p,value:b,name:"number",placeholder:"input phone number",required:!0})]}),Object(r.jsx)("button",{type:"submit",className:"addBtn",children:"Add"})]})},y=n(71),N=n(72),C=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return g.d.getVisibleContacts(e)}));return Object(a.useEffect)((function(){return e(g.b.fetchContacts())}),[e]),Object(r.jsx)("ul",{className:"contacsList",children:t.map((function(t){var n=t.id,c=t.name,a=t.number;return Object(r.jsxs)("li",{className:"contactItem",children:[Object(r.jsx)(y.a,{id:"mdAccount",className:"box1"}),Object(r.jsx)("span",{className:"contactName box2",children:c}),Object(r.jsx)("span",{className:"contactNumber box3",children:a}),Object(r.jsx)("button",{type:"button",className:"closeBtn box4",onClick:function(){return e(g.b.deleteContacts(n))},children:Object(r.jsx)(N.a,{})})]},n)}))})},F=function(){var e=Object(u.c)((function(e){return g.d.getFilter(e)})),t=Object(u.b)();return Object(r.jsxs)("div",{className:"subForm",children:[Object(r.jsx)("h2",{className:"subFormTitle",children:"Find contacts:"}),Object(r.jsxs)("label",{className:"subFormLabel",children:[Object(r.jsx)("span",{className:"subFormLabelTitle",children:"find:"}),Object(r.jsx)("input",{className:"subFormInput",type:"text",onChange:function(e){return t(g.a.changeFilter(e.target.value))},value:e,name:"filter",placeholder:"input name"})]})]})}}},[[137,5,7]]]);
//# sourceMappingURL=main.9a10b5c8.chunk.js.map